# SeatManager 2.0 用户手册

## 目录
1. [简介](#简介)
2. [安装](#安装)
3. [快速开始](#快速开始)
4. [教室配置](#教室配置)
5. [学生管理](#学生管理)
6. [座位分配](#座位分配)
7. [文件操作](#文件操作)
8. [高级功能](#高级功能)
9. [故障排除](#故障排除)
10. [常见问题](#常见问题)

---

## 简介

SeatManager 2.0 是一个全面的教室座位管理系统，旨在帮助教师和管理员高效地组织学生座位安排。该应用程序将强大的 C++ 后端与直观的基于 Python 的图形界面相结合。

### 主要功能
- **可视化座位表**：教室布局的交互式图形表示
- **拖拽操作**：通过拖拽轻松调整座位分配
- **多种算法**：选择随机、按字母顺序或按学号分配
- **灵活布局**：配置各种过道安排的教室
- **文件支持**：以多种格式导入/导出学生和配置
- **性能**：高效处理多达 200 名学生

---

## 安装

### 系统要求
- **操作系统**：Windows 10/11、macOS 10.14+ 或 Linux (Ubuntu 18.04+)
- **Python**：3.7 或更高版本
- **内存**：最低 4GB RAM（推荐 8GB）
- **存储**：100MB 可用空间
- **编译器**：C++17 兼容编译器（MSVC、GCC 或 Clang）

### 安装步骤

#### Windows
1. 从 [python.org](https://www.python.org/downloads/) 安装 Python 3.7+
2. 安装 Visual Studio 2019 或更高版本，包含 C++ 开发工具
3. 下载并解压 SeatManager 2.0
4. 在解压目录中打开命令提示符
5. 运行以下命令：
   ```bash
   python -m venv venv
   venv\Scripts\activate
   pip install -r requirements.txt
   mkdir build
   cd build
   cmake ../backend -G "Visual Studio 16 2019"
   cmake --build . --config Release
   cd ..
   pip install -e .
   ```

或者直接运行自动化构建脚本：
```bash
build.bat
```

#### macOS
1. 使用 Homebrew 安装 Python 3.7+：`brew install python3`
2. 安装 Xcode 命令行工具：`xcode-select --install`
3. 下载并解压 SeatManager 2.0
4. 在解压目录中打开终端
5. 运行以下命令：
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   mkdir build
   cd build
   cmake ../backend
   make -j4
   cd ..
   pip install -e .
   ```

或者直接运行自动化构建脚本：
```bash
chmod +x build.sh
./build.sh
```

#### Linux (Ubuntu)
1. 安装依赖：
   ```bash
   sudo apt update
   sudo apt install python3 python3-pip python3-venv cmake build-essential
   ```
2. 下载并解压 SeatManager 2.0
3. 在解压目录中打开终端
4. 运行以下命令：
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   mkdir build
   cd build
   cmake ../backend
   make -j4
   cd ..
   pip install -e .
   ```

或者直接运行自动化构建脚本：
```bash
chmod +x build.sh
./build.sh
```

---

## 快速开始

### 启动应用程序

#### Windows
```bash
venv\Scripts\activate
python main.py
```

#### macOS/Linux
```bash
source venv/bin/activate
python main.py
```

### 首次设置

首次启动 SeatManager 2.0 时，您将看到主界面，包括：
- **左侧面板**：学生列表
- **右侧面板**：座位表
- **顶部工具栏**：快速访问按钮
- **菜单栏**：完整功能访问

默认教室配置为 8 行 × 6 列，带中间过道。

---

## 教室配置

### 访问配置
1. 转到 **编辑 → 配置教室** 或点击工具栏上的 **配置** 按钮
2. 将出现教室配置对话框

### 设置尺寸
- **行数**：输入所需的行数（1-20）
- **列数**：输入所需的列数（1-20）

### 选择过道布局

#### 无过道
- 所有座位排列在连续的网格中
- 最大座位容量

#### 单个中间过道
- 一条过道沿教室中央延伸
- 提供对所有行的便捷访问
- 座位总数减少约 1/列数

#### 双侧过道
- 两条过道将教室分为三个部分
- 常见于较大的教室
- 座位总数减少约 2/列数

#### 自定义过道
- 指定过道的确切列位置
- 使用微调框选择列号
- 点击"添加过道"将其添加到列表
- 选择过道并点击"删除选定"以删除它
- 点击"更新预览"查看布局

### 预览
预览区域显示教室配置的可视化表示：
- `[ ]` 表示座位
- 空格表示过道

### 应用配置
点击 **确定** 应用配置或点击 **取消** 放弃更改。

---

## 学生管理

### 添加学生

#### 手动输入
1. 在左侧面板中点击 **添加学生** 按钮
2. 输入学生信息：
   - **姓名**：必填字段
   - **性别**：可选（男、女、其他）
   - **班级**：可选（例如"1班"）
3. 点击 **确定** 添加学生

#### 从文件导入
1. 转到 **文件 → 导入学生** 或按 `Ctrl+I`
2. 选择文件（CSV、TXT 或 JSON 格式）
3. 学生将自动导入

### 查看学生
- 所有学生显示在左侧面板中
- 使用搜索框按姓名筛选学生
- 点击学生以选择他们

### 删除学生
1. 从列表中选择学生
2. 点击 **删除选定** 按钮
3. 如果提示，确认删除

### 学生信息
点击座位表中的任何学生以查看其详细信息：
- 姓名
- 学号
- 性别
- 班级
- 当前座位位置

---

## 座位分配

### 自动分配

#### 随机分配
1. 导入学生或手动添加到列表
2. 点击 **随机** 按钮或转到 **工具 → 随机分配**
3. 学生将被随机分配到可用座位

#### 按字母顺序分配
1. 导入学生或手动添加到列表
2. 点击 **字母** 按钮或转到 **工具 → 按字母顺序分配**
3. 学生将按姓名字母顺序分配

#### 按学号分配
1. 导入学生或手动添加到列表
2. 点击 **按学号** 按钮或转到 **工具 → 按学号分配**
3. 学生将按学号顺序分配

### 手动分配（拖拽）
1. 在座位表中点击并按住学生
2. 将学生拖动到所需座位
3. 释放鼠标按钮以放置学生
4. 学生将被移动到新位置

### 清除分配
- 点击 **清除** 按钮或转到 **工具 → 清除所有分配**
- 所有学生将从座位中移除
- 学生保留在学生列表中

### 分配验证
系统自动验证分配以确保：
- 没有两个学生被分配到同一个座位
- 学生未被分配到过道
- 所有分配都在教室边界内

---

## 文件操作

### 导入学生

#### 支持的格式
- **CSV**：带标题的逗号分隔值
- **TXT**：每行一个姓名的纯文本
- **JSON**：结构化数据格式

#### CSV 格式示例
```csv
姓名,性别,班级
张三,男,1班
李四,女,1班
```

#### TXT 格式示例
```
张三
李四
```

#### JSON 格式示例
```json
{
  "students": [
    {
      "id": 1,
      "name": "张三",
      "gender": "男",
      "className": "1班"
    }
  ]
}
```

### 导出座位表

#### 导出选项
1. 转到 **文件 → 导出座位表** 或按 `Ctrl+E`
2. 选择所需格式：
   - **CSV**：电子表格兼容格式
   - **TXT**：纯文本格式
   - **JSON**：结构化数据格式
3. 选择保存位置
4. 点击 **保存**

### 保存配置

1. 转到 **文件 → 保存配置** 或按 `Ctrl+S`
2. 选择保存位置
3. 配置将保存为 JSON 文件，包括：
   - 教室尺寸
   - 过道布局
   - 学生列表
   - 当前座位分配

### 加载配置

1. 转到 **文件 → 加载配置** 或按 `Ctrl+O`
2. 选择以前保存的 JSON 配置文件
3. 教室和所有分配将被恢复

---

## 高级功能

### 快捷键

| 快捷键 | 操作 |
|--------|------|
| `Ctrl+I` | 导入学生 |
| `Ctrl+E` | 导出座位表 |
| `Ctrl+S` | 保存配置 |
| `Ctrl+O` | 加载配置 |
| `Ctrl+N` | 添加学生 |
| `Ctrl+Q` | 退出应用程序 |
| `F5` | 刷新视图 |

### 状态栏信息
底部状态栏显示：
- 教室尺寸（行 × 列）
- 座位总数
- 已占用座位数
- 可用座位数

### 学生搜索
- 使用学生列表面板中的搜索框
- 输入学生姓名的任何部分
- 列表在您输入时实时筛选

### 多个座位表
- 生成多个座位安排
- 将每个安排导出到单独的文件
- 比较不同的配置

### 性能优化
- 系统针对多达 200 名学生进行了优化
- 支持大型教室（20×20）
- 拖拽操作流畅且响应迅速

---

## 故障排除

### 后端不可用

**问题**：出现"警告：C++ 后端不可用"消息

**解决方案**：
1. 确保 C++ 后端构建成功
2. 运行 `pip install -e .` 安装 Python 包
3. 验证 pybind11 已安装：`pip list | grep pybind11`
4. 检查 C++ 编译器是否正确配置

### 导入错误

**问题**：无法从文件导入学生

**解决方案**：
1. 验证文件格式正确（CSV、TXT 或 JSON）
2. 检查文件未损坏
3. 确保文件编码为 UTF-8
4. 尝试在文本编辑器中打开文件以验证内容

### 分配问题

**问题**：学生未正确分配

**解决方案**：
1. 确保有足够的可用座位
2. 检查过道是否未阻挡座位访问
3. 验证教室配置
4. 尝试清除分配并重新分配

### 拖拽不工作

**问题**：无法将学生拖动到新座位

**解决方案**：
1. 确保目标座位不是过道
2. 检查目标座位未被占用
3. 验证学生已正确选择
4. 尝试在拖动之前点击并按住片刻

### 性能问题

**问题**：应用程序缓慢或无响应

**解决方案**：
1. 减少学生数量（最多推荐 200 名）
2. 关闭其他应用程序以释放内存
3. 重启应用程序
4. 检查系统资源（CPU、内存）

---

## 常见问题

### Q：我可以有多个教室吗？
A：目前，SeatManager 2.0 一次支持一个教室。您可以将不同的配置保存为单独的 JSON 文件，并根据需要加载它们。

### Q：最大学生数是多少？
A：系统针对多达 200 名学生进行了优化，但根据系统资源，它可以处理更多。

### Q：我可以自定义座位颜色吗？
A：座位颜色目前是固定的（占用为蓝色，空为白色，过道为灰色）。自定义可能会在将来的版本中添加。

### Q：我的数据会自动保存吗？
A：不会，您必须使用 **文件 → 保存配置** 或 `Ctrl+S` 手动保存配置。

### Q：我可以打印座位表吗？
A：目前，没有直接打印功能。将座位表导出到与您首选应用程序兼容的格式，然后从那里打印。

### Q：应用程序可以在移动设备上工作吗？
A：SeatManager 2.0 专为桌面使用而设计。可能会在将来的版本中考虑移动支持。

### Q：我可以与其他用户共享配置吗？
A：可以，将配置保存为 JSON 文件并共享它。其他用户可以使用 **文件 → 加载配置** 加载它。

### Q：如果我的学生比座位多怎么办？
A：只有前 N 名学生（其中 N 等于可用座位数）将被分配。其余学生将保留在学生列表中但未入座。

### Q：我可以撤销分配吗？
A：没有撤销功能，但您可以清除所有分配并重新分配，或使用拖拽手动移动学生。

### Q：应用程序有其他语言版本吗？
A：目前，SeatManager 2.0 仅提供英文版本。可能会在将来的版本中添加多语言支持。

---

## 支持

如需额外帮助、问题或功能请求，请参考项目文档或联系开发团队。

---

## 版本信息

**版本**：2.0.0  
**发布日期**：2026年  
**平台**：Windows、macOS、Linux  

---

*用户手册结束*